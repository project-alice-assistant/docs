(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{378:function(t,e,s){"use strict";s.r(e);var a=s(8),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"intro"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[t._v("#")]),t._v(" Intro")]),t._v(" "),s("p",[t._v("Now that you've discovered the structure of a skill, and seen some files a bit more in-depth, there's a lot more for you to discover!")]),t._v(" "),s("h2",{attrs:{id:"logging"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logging"}},[t._v("#")]),t._v(" Logging")]),t._v(" "),s("p",[t._v("To track events and data within your skill we can use logging. If you are new to programming, this is a way to output a message that can tell you the state of your skill at a particular point in time, details about an error that has occurred, or simply noting that a program reached a particular point in the code.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Logging is useful during skill development, as well as to help end-users diagnose problems in the future.")])]),t._v(" "),s("h3",{attrs:{id:"basic-usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-usage"}},[t._v("#")]),t._v(" Basic Usage")]),t._v(" "),s("p",[t._v("A logger is available through the "),s("code",[t._v("AliceSkill")]),t._v(" base class. This means that you can use it within a skill without needing to import the "),s("code",[t._v("logging")]),t._v(" package.")]),t._v(" "),s("p",[t._v("Here is a quick example of an "),s("code",[t._v("info")]),t._v(" level message used in a skill. We will learn more about different levels shortly.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AliceSkill "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AliceSkill\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DialogSession "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" DialogSession\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Decorators "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" IntentHandler\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloWorldskill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AliceSkill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n\n\t"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HelloWorldIntent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("helloWorldIntent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("_kwargs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n\t\t\tskills can log useful information.\n\t\t\tThese will appear in the Web Interface and the logs file.\n\t\t"""')]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is an info level log message."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("endDialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randomTalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'helloWorld'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"logging-levels"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logging-levels"}},[t._v("#")]),t._v(" Logging Levels")]),t._v(" "),s("p",[t._v("There are five types of log messages available that are used for different purposes.")]),t._v(" "),s("h4",{attrs:{id:"debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debug"}},[t._v("#")]),t._v(" Debug")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logDebug\n")])])]),s("p",[t._v("Debug messages are used for information that will help to diagnose problems. These are particularly useful if there is anything that has the potential to break in the future. They will only show if debug is set to true in the settings.")]),t._v(" "),s("h4",{attrs:{id:"info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#info"}},[t._v("#")]),t._v(" Info")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo\n")])])]),s("p",[t._v("Info messages provide general information when the skill is running as expected. These messages will always be logged so are useful when actively developing a skill, but should be used sparingly once a skill is published for other people to use.")]),t._v(" "),s("h4",{attrs:{id:"warning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#warning"}},[t._v("#")]),t._v(" Warning")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logWarning\n")])])]),s("p",[t._v("Warning messages are used to indicate that something has gone wrong, but the skill will continue to function.\nIt is possible to output a stack trace when needed using:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logWarning"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warning message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" printStack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])]),s("h4",{attrs:{id:"error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error"}},[t._v("#")]),t._v(" Error")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logError\n")])])]),s("p",[t._v("Error messages indicate that a serious problem has occurred and the skill will not be able to function.\nThey will always output a stack trace.")]),t._v(" "),s("h4",{attrs:{id:"critical"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#critical"}},[t._v("#")]),t._v(" Critical")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logCritical\n")])])]),s("p",[t._v("Critical error messages indicate that a very serious problem has occurred, and the skill will not be able to function.\nThey will always output a stack trace.")]),t._v(" "),s("h4",{attrs:{id:"fatal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fatal"}},[t._v("#")]),t._v(" Fatal")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logFatal\n")])])]),s("p",[s("code",[t._v("logFatal")]),t._v(" is an unrecoverable error that forces Alice to shut down. It is not recommended using in skills!")]),t._v(" "),s("h3",{attrs:{id:"where-do-these-messages-get-logged"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#where-do-these-messages-get-logged"}},[t._v("#")]),t._v(" Where do these messages get logged?")]),t._v(" "),s("p",[t._v("Log messages from a skill are displayed in the ProjectAlice Web Interface so that a User can see in real-time what is happening in the skill. They are also written to the "),s("code",[t._v("logs")]),t._v(" file located at: "),s("code",[t._v("~/ProjectAlice/var/logs")])]),t._v(" "),s("h3",{attrs:{id:"plurals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plurals"}},[t._v("#")]),t._v(" Plurals")]),t._v(" "),s("p",[t._v("The nightmare for perfectionists... What's more annoying than a log line saying "),s("code",[t._v("Loaded 1 devices")]),t._v("? That's why we implemented a pluralizer... With every type of log messages, you can pass a second argument, "),s("code",[t._v("plural")]),t._v(" with a list of words, in your log line, that need to be automatically added with an "),s("code",[t._v("s")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'Loaded ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("myDeviceCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" device in ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("roomCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" room.'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" plural"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'device'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'room'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Note that you should use the non-plural form, Alice will add the required "),s("code",[t._v("s")]),t._v("'s if needed. The pluralization only works with digits and not with written number.")]),t._v(" "),s("h3",{attrs:{id:"styling-your-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#styling-your-logs"}},[t._v("#")]),t._v(" Styling your logs")]),t._v(" "),s("p",[t._v("Logs support a similar to Markdown syntax. You can output bold text, underlined, dimmed and even colored text! These formatted logs will only show on stdout and on the interface. Here's how you can style your logs:")]),t._v(" "),s("h4",{attrs:{id:"bold"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bold"}},[t._v("#")]),t._v(" Bold:")]),t._v(" "),s("p",[s("code",[t._v("**My bold text**")])]),t._v(" "),s("h4",{attrs:{id:"underlined"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#underlined"}},[t._v("#")]),t._v(" Underlined:")]),t._v(" "),s("p",[s("code",[t._v("__My underlined text__")])]),t._v(" "),s("h4",{attrs:{id:"dimmed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dimmed"}},[t._v("#")]),t._v(" Dimmed:")]),t._v(" "),s("p",[s("code",[t._v("--My dimmed text--")])]),t._v(" "),s("h4",{attrs:{id:"colored"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#colored"}},[t._v("#")]),t._v(" Colored:")]),t._v(" "),s("p",[s("code",[t._v("![red](My colored text)")])]),t._v(" "),s("p",[t._v("Available colors are: red, green, yellow, blue, grey")]),t._v(" "),s("h3",{attrs:{id:"using-the-logger-outside-the-skill-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-the-logger-outside-the-skill-class"}},[t._v("#")]),t._v(" Using the logger outside the skill class")]),t._v(" "),s("p",[t._v("As the logger is provided by the skill class, it is only available within that scope. If you need to log messages from outside this class, you can import the logger manually.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger\n")])])]),s("p",[t._v("This can then be used outside your skill's class. Extending our first example:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AliceSkill "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AliceSkill\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DialogSession "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" DialogSession\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Decorators "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" IntentHandler\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger\n\nLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is a logged info level message outside of the skill class scope"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("my_special_function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\tLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Another usage of logging."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloWorldskill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AliceSkill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HelloWorldIntent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("helloWorldIntent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("_kwargs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n\t\t\tskills can log useful information.\n\t\t\tThese will appear in the Web Interface and the logs file.\n\t\t"""')]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is an info level log message."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("endDialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randomTalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'helloWorld'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tmy_special_function"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("When you want to print stack traces when logging outside the skill's class it might be required to provide\na different depth for the stack trace to the Logger class, since the default depth of the stack trace is 4.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("depth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'log message with stack trace'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("h2",{attrs:{id:"database-access"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-access"}},[t._v("#")]),t._v(" Database access")]),t._v(" "),s("p",[t._v("Alice comes with a built-in SQLite database and offers a service provider for accessing the database.\nThere are methods for creating, modifying and deleting a table built right into the skill constructor\nand there are methods available for adding, removing, modifying and of course reading the content of the database.")]),t._v(" "),s("h3",{attrs:{id:"setting-up-the-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-database"}},[t._v("#")]),t._v(" Setting up the database")]),t._v(" "),s("p",[t._v("Define the DB in your program as a dictionary and prepare the name of the database as a variable as best practice:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    _TABLENAME "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyReminders'")]),t._v("\n    _DATABASE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _TABLENAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message TEXT NOT NULL'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timestamp INTEGER NOT NULL'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Include the database definition into the constructor of your skill:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__init__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("databaseSchema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_DATABASE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Now your database will be set up with the first load of your skill.\nIf you later on decide to change the structure of your database, Alice will take care of that as well - just update the "),s("code",[t._v("self._DATABASE")]),t._v(" variable and Alice will add or remove the correct fields on reload of the skill.")]),t._v(" "),s("h3",{attrs:{id:"writing-to-your-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#writing-to-your-database"}},[t._v("#")]),t._v(" Writing to your database")]),t._v(" "),s("p",[t._v("Adding an entry to your database is as easy as defining the new entry as dictionary and calling the DatabaseManager:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("databaseInsert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tableName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_TABLENAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yourMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timestamp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yourTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The query will be automatically generated from the values that correspond to the "),s("code",[t._v("column names: value")])]),t._v(" "),s("h3",{attrs:{id:"reading-from-your-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reading-from-your-database"}},[t._v("#")]),t._v(" Reading from your database")]),t._v(" "),s("p",[t._v("If you want to read entries, you have to know a bit of SQL for the selection criteria.\nWith "),s("code",[t._v("myMessage")]),t._v(" as a local python variable you can make the following call, to read a database entry with the message stored in "),s("code",[t._v("myMessage")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("databaseFetch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            tableName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_TABLENAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SELECT * FROM :__table__ WHERE message = :tmpMessage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tmpMessage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'all'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("As for the method, you can choose between "),s("code",[t._v("all")]),t._v(" and "),s("code",[t._v("one")]),t._v(". The difference is that "),s("code",[t._v("all")]),t._v(" returns a list of entries, and "),s("code",[t._v("one")]),t._v(", well, one entry?")]),t._v(" "),s("h3",{attrs:{id:"delete-from-your-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete-from-your-database"}},[t._v("#")]),t._v(" Delete from your database")]),t._v(" "),s("p",[t._v("Again some SQL Syntax has to be known.\nIn this example we delete all entries that are already in the past by comparing them to the python variable "),s("code",[t._v("myTimestamp")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DatabaseManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                tableName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyReminders'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DELETE FROM :__table__ WHERE timestamp < :tmpTimestamp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tmpTimestamp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                callerName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" Events")]),t._v(" "),s("p",[t._v("Project Alice is driven by "),s("Term",{attrs:{term:"event",show:"events"}}),t._v('. What are events you might ask, or what do we mean with it? Ever heard of "action -> reaction"? That\'s exactly it! When something happens, something occurs! Events are by convention prefixed with "on", like "onStormyWeather" or "onDoorOpened".')],1),t._v(" "),s("p",[t._v("We provide a load of pre-made system events you can override in your skills. Let me try to list them all, more are added on regular bases though!")]),t._v(" "),s("h3",{attrs:{id:"core-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#core-events"}},[t._v("#")]),t._v(" Core events")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Description")]),t._v(" "),s("p",[t._v("Core events report what's happening under the hood, what the system is doing")])]),t._v(" "),s("h4",{attrs:{id:"def-onstart-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onstart-self"}},[t._v("#")]),t._v(" def onStart(self)")]),t._v(" "),s("p",[t._v("Triggered when Alice is starting the skills")]),t._v(" "),s("h4",{attrs:{id:"def-onstop-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onstop-self"}},[t._v("#")]),t._v(" def onStop(self)")]),t._v(" "),s("p",[t._v("Triggered when Alice is stopping the skill. The skill is typically stopped when Alice reboots, or after and update")]),t._v(" "),s("h4",{attrs:{id:"def-onbooted-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onbooted-self"}},[t._v("#")]),t._v(" def onBooted(self)")]),t._v(" "),s("p",[t._v("Triggered when everything has started. Comes after "),s("code",[t._v("onStart")])]),t._v(" "),s("h4",{attrs:{id:"def-onhotword-self-siteid-str-user-str-constants-unknown-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onhotword-self-siteid-str-user-str-constants-unknown-user"}},[t._v("#")]),t._v(" def onHotword(self, siteId: str, user: str = constants.UNKNOWN_USER)")]),t._v(" "),s("p",[t._v("Triggered when a hotword is heard. A "),s("code",[t._v("hotword")]),t._v(" is a "),s("code",[t._v("universal wakeword")]),t._v(" that doesn't identify a user")]),t._v(" "),s("h4",{attrs:{id:"def-onwakeword-self-siteid-str-user-str-constants-unknown-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onwakeword-self-siteid-str-user-str-constants-unknown-user"}},[t._v("#")]),t._v(" def onWakeword(self, siteId: str, user: str = constants.UNKNOWN_USER)")]),t._v(" "),s("p",[t._v("Triggered when a wakeword is heard. A "),s("code",[t._v("wakeword")]),t._v(" is a "),s("code",[t._v("hotword")]),t._v(" that identifies a user")]),t._v(" "),s("h4",{attrs:{id:"def-onhotwordtoggleon-self-siteid-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onhotwordtoggleon-self-siteid-str"}},[t._v("#")]),t._v(" def onHotwordToggleOn(self, siteId: str)")]),t._v(" "),s("p",[t._v("Triggered when the hotword triggers itself on again. Typically, the hotword is turned off once it's been heard, until the dialog is over.")]),t._v(" "),s("h4",{attrs:{id:"def-onhotwordtoggleoff-self-siteid-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onhotwordtoggleoff-self-siteid-str"}},[t._v("#")]),t._v(" def onHotwordToggleOff(self, siteId: str)")]),t._v(" "),s("p",[t._v("Triggered when the hotword goes off. Typically, the hotword is turned off once it's been heard.")]),t._v(" "),s("h4",{attrs:{id:"def-onsessionstarted-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsessionstarted-self-session"}},[t._v("#")]),t._v(" def onSessionStarted(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a session is started")]),t._v(" "),s("h4",{attrs:{id:"def-onstartlistening-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onstartlistening-self-session"}},[t._v("#")]),t._v(" def onStartListening(self, session)")]),t._v(" "),s("p",[t._v("Triggered when Alice starts listening to you, right after the hotword was caught")]),t._v(" "),s("h4",{attrs:{id:"def-oncaptured-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oncaptured-self-session"}},[t._v("#")]),t._v(" def onCaptured(self, session)")]),t._v(" "),s("p",[t._v("Triggered when Alice captured what you said, when you finished talking to her")]),t._v(" "),s("h4",{attrs:{id:"def-onpartialtextcaptured-self-session-text-str-likelihood-float-seconds-float"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onpartialtextcaptured-self-session-text-str-likelihood-float-seconds-float"}},[t._v("#")]),t._v(" def onPartialTextCaptured(self, session, text: str, likelihood: float, seconds: float):")]),t._v(" "),s("p",[t._v("Triggered every time the ASR spits out a part of the utterance it is actively trying to capture.")]),t._v(" "),s("h4",{attrs:{id:"def-onusercancel-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onusercancel-self-session"}},[t._v("#")]),t._v(" def onUserCancel(self, session)")]),t._v(" "),s("p",[t._v("Triggered when the user cancels a dialog. This ends the session and doesn't trigger onIntentParsed!")]),t._v(" "),s("h4",{attrs:{id:"def-onsessiontimeout-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsessiontimeout-self-session"}},[t._v("#")]),t._v(" def onSessionTimeout(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a session times out")]),t._v(" "),s("h4",{attrs:{id:"def-onintentnotrecognized-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onintentnotrecognized-self-session"}},[t._v("#")]),t._v(" def onIntentNotRecognized(self, session)")]),t._v(" "),s("p",[t._v("Triggered when the NLU couldn't understand the intent. Typically, occurs after onCaptured")]),t._v(" "),s("h4",{attrs:{id:"def-onsessionerror-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsessionerror-self-session"}},[t._v("#")]),t._v(" def onSessionError(self, session)")]),t._v(" "),s("p",[t._v("Triggered if the session ends with an error")]),t._v(" "),s("h4",{attrs:{id:"def-onsessionended-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsessionended-self-session"}},[t._v("#")]),t._v(" def onSessionEnded(self, session)")]),t._v(" "),s("p",[t._v("Triggered when the session ends")]),t._v(" "),s("h4",{attrs:{id:"def-onsay-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsay-self-session"}},[t._v("#")]),t._v(" def onSay(self, session)")]),t._v(" "),s("p",[t._v("Triggered when Alice starts to say something")]),t._v(" "),s("h4",{attrs:{id:"def-onsayfinished-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsayfinished-self-session"}},[t._v("#")]),t._v(" def onSayFinished(self, session)")]),t._v(" "),s("p",[t._v("Triggered when Alice has finished speaking")]),t._v(" "),s("h4",{attrs:{id:"def-onsessionqueued-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsessionqueued-self-session"}},[t._v("#")]),t._v(" def onSessionQueued(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a new session is queued due to the fact there is already one on going")]),t._v(" "),s("h4",{attrs:{id:"def-onmessage-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onmessage-self-session"}},[t._v("#")]),t._v(" def onMessage(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a subscribed MQTT message is received")]),t._v(" "),s("h4",{attrs:{id:"def-onskillinstalled-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onskillinstalled-self-kwargs"}},[t._v("#")]),t._v(" def onSkillInstalled(self, **kwargs)")]),t._v(" "),s("p",[t._v("Triggered when a skill has installed. Info about what skill can be extracted from kwargs")]),t._v(" "),s("h4",{attrs:{id:"def-onskillupdated-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onskillupdated-self-kwargs"}},[t._v("#")]),t._v(" def onSkillUpdated(self, **kwargs)")]),t._v(" "),s("p",[t._v("Triggered when a skill has updated. Info about what skill can be extracted from kwargs")]),t._v(" "),s("h4",{attrs:{id:"def-onskillinstallfailed-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onskillinstallfailed-self-kwargs"}},[t._v("#")]),t._v(" def onSkillInstallFailed(self, **kwargs)")]),t._v(" "),s("p",[t._v("Triggered when a skill failed installing")]),t._v(" "),s("h4",{attrs:{id:"def-oninternetconnected-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oninternetconnected-self"}},[t._v("#")]),t._v(" def onInternetConnected(self)")]),t._v(" "),s("p",[t._v("Triggered when internet connection is back, after a failure. Won't trigger on boot!")]),t._v(" "),s("h4",{attrs:{id:"def-oninternetlost-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oninternetlost-self"}},[t._v("#")]),t._v(" def onInternetLost(self)")]),t._v(" "),s("p",[t._v("Triggered when internet connection is lost.")]),t._v(" "),s("h4",{attrs:{id:"def-onbroadcastingfornewdevicestart-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onbroadcastingfornewdevicestart-self-session"}},[t._v("#")]),t._v(" def onBroadcastingForNewDeviceStart(self, session)")]),t._v(" "),s("p",[t._v("Triggered when Alice starts broadcasting her IP for new devices to discover")]),t._v(" "),s("h4",{attrs:{id:"def-onbroadcastingfornewdevicestop-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onbroadcastingfornewdevicestop-self"}},[t._v("#")]),t._v(" def onBroadcastingForNewDeviceStop(self)")]),t._v(" "),s("p",[t._v("Triggered when Alice stops broadcasting her IP for new devices to discover. Typically happens when a new device was added")]),t._v(" "),s("h4",{attrs:{id:"def-onauthenticated-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onauthenticated-self-session"}},[t._v("#")]),t._v(" def onAuthenticated(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a user successfully authenticated through his pin code")]),t._v(" "),s("h4",{attrs:{id:"def-onauthenticationfailed-self-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onauthenticationfailed-self-session"}},[t._v("#")]),t._v(" def onAuthenticationFailed(self, session)")]),t._v(" "),s("p",[t._v("Triggered when a user failed authentication with his pin code")]),t._v(" "),s("h4",{attrs:{id:"def-onaudioframe-self-message"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onaudioframe-self-message"}},[t._v("#")]),t._v(" def onAudioFrame(self, message)")]),t._v(" "),s("p",[t._v("Triggered when audio frame are coming in through MQTT. "),s("strong",[t._v("Can be very consuming!")])]),t._v(" "),s("h4",{attrs:{id:"def-ondeviceconnecting-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ondeviceconnecting-self"}},[t._v("#")]),t._v(" def onDeviceConnecting(self)")]),t._v(" "),s("p",[t._v("Triggered when a device is trying to connect to Alice's network")]),t._v(" "),s("h4",{attrs:{id:"def-ondevicedisconnecting-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ondevicedisconnecting-self"}},[t._v("#")]),t._v(" def onDeviceDisconnecting(self)")]),t._v(" "),s("p",[t._v("Triggered when a device is disconnecting from Alice's network")]),t._v(" "),s("h4",{attrs:{id:"def-onvadup-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onvadup-self-kwargs"}},[t._v("#")]),t._v(" def onVadUp(self, **kwargs):")]),t._v(" "),s("p",[t._v("Triggered when voice activity is heard")]),t._v(" "),s("h4",{attrs:{id:"def-onvaddown-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onvaddown-self-kwargs"}},[t._v("#")]),t._v(" def onVadDown(self, **kwargs):")]),t._v(" "),s("p",[t._v("Triggered when voice activity has stopped")]),t._v(" "),s("h4",{attrs:{id:"def-onnlutrained-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onnlutrained-self-kwargs"}},[t._v("#")]),t._v(" def onNluTrained(self, **kwargs):")]),t._v(" "),s("p",[t._v("Triggered when the NLU has finished training")]),t._v(" "),s("h4",{attrs:{id:"def-onsnipsassistantinstalled-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsnipsassistantinstalled-self-kwargs"}},[t._v("#")]),t._v(" def onSnipsAssistantInstalled(self, **kwargs):")]),t._v(" "),s("p",[t._v("Triggered when the assistant.json file has installed after training")]),t._v(" "),s("h4",{attrs:{id:"def-onsnipsassistantfailedtraining-self-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsnipsassistantfailedtraining-self-kwargs"}},[t._v("#")]),t._v(" def onSnipsAssistantFailedTraining(self, **kwargs):")]),t._v(" "),s("p",[t._v("Triggered when the assistant.json file failed training")]),t._v(" "),s("h3",{attrs:{id:"user-states"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-states"}},[t._v("#")]),t._v(" User states")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Description")]),t._v(" "),s("p",[t._v('User states events report a change of state for a user. Example: "Hey Alice? I\'m going bed!" would trigger "onGoingBed" and change the user state accordingly')])]),t._v(" "),s("h4",{attrs:{id:"def-ongoingbed-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ongoingbed-self"}},[t._v("#")]),t._v(" def onGoingBed(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's going bed")]),t._v(" "),s("h4",{attrs:{id:"def-onsleep-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onsleep-self"}},[t._v("#")]),t._v(" def onSleep(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice good night")]),t._v(" "),s("h4",{attrs:{id:"def-onwakeup-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onwakeup-self"}},[t._v("#")]),t._v(" def onWakeup(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice good morning")]),t._v(" "),s("h4",{attrs:{id:"def-onleavinghome-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onleavinghome-self"}},[t._v("#")]),t._v(" def onLeavingHome(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's leaving home")]),t._v(" "),s("h4",{attrs:{id:"def-onreturninghome-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onreturninghome-self"}},[t._v("#")]),t._v(" def onReturningHome(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's returned home")]),t._v(" "),s("h4",{attrs:{id:"def-oneating-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oneating-self"}},[t._v("#")]),t._v(" def onEating(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's eating")]),t._v(" "),s("h4",{attrs:{id:"def-onwatchingtv-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onwatchingtv-self"}},[t._v("#")]),t._v(" def onWatchingTV(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's watching TV")]),t._v(" "),s("h4",{attrs:{id:"def-oncooking-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oncooking-self"}},[t._v("#")]),t._v(" def onCooking(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's cooking")]),t._v(" "),s("h4",{attrs:{id:"def-onmakeup-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onmakeup-self"}},[t._v("#")]),t._v(" def onMakeup(self)")]),t._v(" "),s("p",[t._v("Triggered when a user tells Alice he's putting makeup")]),t._v(" "),s("h4",{attrs:{id:"def-oncontextsensitivedelete-self-sessionid-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oncontextsensitivedelete-self-sessionid-str"}},[t._v("#")]),t._v(" def onContextSensitiveDelete(self, sessionId: str)")]),t._v(" "),s("p",[t._v("Triggered when the user asks, in a context-sensitive scenario, to delete or forget something. Example:\n")]),s("div",{staticClass:"userSpeech female"},[t._v("What's my favorite color?")]),t._v(" "),s("div",{staticClass:"aliceSpeech"},[t._v("blue")]),t._v(" "),s("div",{staticClass:"userSpeech female"},[t._v("Forget this!")]),t._v(" "),s("div",{staticClass:"aliceSpeech"},[t._v("ok")]),s("p"),t._v(" "),s("h4",{attrs:{id:"def-oncontextsensitiveedit-self-sessionid-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-oncontextsensitiveedit-self-sessionid-str"}},[t._v("#")]),t._v(" def onContextSensitiveEdit(self, sessionId: str)")]),t._v(" "),s("p",[t._v("Triggered when the user asks, in a context-sensitive scenario, to change something. Example:\n")]),s("div",{staticClass:"userSpeech male"},[t._v("What's my favorite color?")]),t._v(" "),s("div",{staticClass:"aliceSpeech"},[t._v("blue")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("Change this please")]),t._v(" "),s("div",{staticClass:"aliceSpeech"},[t._v("Sure, so tell me, what's your new favorite color?")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("green")]),t._v(" "),s("div",{staticClass:"aliceSpeech"},[t._v("ok")]),s("p"),t._v(" "),s("h3",{attrs:{id:"timed-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#timed-events"}},[t._v("#")]),t._v(" Timed events")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Description")]),t._v(" "),s("p",[t._v("When Alice starts, the following events are scheduled. Alice does calculate for them to start at the correct time, so it reflects real life clock.\nThus, onFullHour doesn't mean Alice was running an hour on the first round, as if Alice start at 9:47, onFullMinute would trigger at 9"),s("Term",{attrs:{term:"48"}}),t._v("00,\nonFiveMinutes at 9"),s("Term",{attrs:{term:"50"}}),t._v("00, onFullHour and all the others at precisely 10"),s("Term",{attrs:{term:"00"}}),t._v("00")],1)]),t._v(" "),s("h4",{attrs:{id:"def-onfullminute-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onfullminute-self"}},[t._v("#")]),t._v(" def onFullMinute(self)")]),t._v(" "),s("p",[t._v("Triggered every real time full minute.")]),t._v(" "),s("h4",{attrs:{id:"def-onfiveminute-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onfiveminute-self"}},[t._v("#")]),t._v(" def onFiveMinute(self)")]),t._v(" "),s("p",[t._v("Triggered every real time five minutes. Example: 10:15, 10:35; 12:55")]),t._v(" "),s("h4",{attrs:{id:"def-onquarterhour-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onquarterhour-self"}},[t._v("#")]),t._v(" def onQuarterHour(self)")]),t._v(" "),s("p",[t._v("Triggered every real time fifteen minutes. Example: 10:15, 7:30; 12:00")]),t._v(" "),s("h4",{attrs:{id:"def-onfullhour-self"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onfullhour-self"}},[t._v("#")]),t._v(" def onFullHour(self)")]),t._v(" "),s("p",[t._v("Triggered every real time hour.")]),t._v(" "),s("h3",{attrs:{id:"telemetry-reports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#telemetry-reports"}},[t._v("#")]),t._v(" Telemetry reports")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Description")]),t._v(" "),s("p",[t._v("Alice comes with a telemetry manager skill can use to store weather data. The following events reflect these reports")])]),t._v(" "),s("h4",{attrs:{id:"def-onuvindexalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onuvindexalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onUVIndexAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a UV index out of the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onraining-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onraining-self-devicelist-list"}},[t._v("#")]),t._v(" def onRaining(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports rain")]),t._v(" "),s("h4",{attrs:{id:"def-ontoomuchrain-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ontoomuchrain-self-devicelist-list"}},[t._v("#")]),t._v(" def onTooMuchRain(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a rain level above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onwindy-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onwindy-self-devicelist-list"}},[t._v("#")]),t._v(" def onWindy(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a wind strength above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onfreezing-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onfreezing-self-devicelist-list"}},[t._v("#")]),t._v(" def onFreezing(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports temperature below 0°C")]),t._v(" "),s("h4",{attrs:{id:"def-ontemperaturehighalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ontemperaturehighalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onTemperatureHighAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a temperature above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-ontemperaturelowalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-ontemperaturelowalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onTemperatureLowAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a temperature under the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onco2alert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onco2alert-self-devicelist-list"}},[t._v("#")]),t._v(" def onCO2Alert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a CO2 level above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onhumidityhighalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onhumidityhighalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onHumidityHighAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a humidity level above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onhumiditylowalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onhumiditylowalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onHumidityLowAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a humidity level under the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onnoisealert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onnoisealert-self-devicelist-list"}},[t._v("#")]),t._v(" def onNoiseAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports a sound level above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onpressurehighalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onpressurehighalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onPressureHighAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports an atmospheric pressure level above the limit set by the user")]),t._v(" "),s("h4",{attrs:{id:"def-onpressurelowalert-self-devicelist-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#def-onpressurelowalert-self-devicelist-list"}},[t._v("#")]),t._v(" def onPressureLowAlert(self, deviceList: list)")]),t._v(" "),s("p",[t._v("Triggered when a device reports an atmospheric pressure level under the limit set by the user")]),t._v(" "),s("h2",{attrs:{id:"missing-slot-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#missing-slot-info"}},[t._v("#")]),t._v(" Missing slot info")]),t._v(" "),s("p",[t._v("Sometimes you need more information than what the user provided...")]),t._v(" "),s("h3",{attrs:{id:"study-case"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#study-case"}},[t._v("#")]),t._v(" Study case")]),t._v(" "),s("p",[t._v("Let's take an intent with a few slots, highlighted in the example.")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("Hey Alice?")]),t._v(" "),s("div",{staticClass:"aliceSpeech female"},[t._v("Yes?")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("Can you book me a flight from "),s("strong",{staticClass:"slotWord"},[t._v("Geneva")]),t._v(" to "),s("strong",{staticClass:"slotWord"},[t._v("New York")]),t._v(" for "),s("strong",{staticClass:"slotWord"},[t._v("tuesday 23 third of april around midday")]),t._v(" please?")]),t._v(" "),s("div",{staticClass:"aliceSpeech female"},[t._v("Of course, let me check that!")]),t._v(" "),s("p",[t._v("For this example (and also in reality) a flight can only be booked if")]),t._v(" "),s("ul",[s("li",[t._v("The user has the intention to book a ticket, which requires the "),s("code",[t._v("intent")]),t._v(" to be correctly detected")]),t._v(" "),s("li",[t._v("The user provided the following information, aka "),s("code",[t._v("slots")]),t._v(":\n"),s("ul",[s("li",[s("code",[t._v("origin")]),t._v(": Where the user wants to depart from")]),t._v(" "),s("li",[s("code",[t._v("destination")]),t._v(": Where the user wants to travel to")]),t._v(" "),s("li",[s("code",[t._v("date")]),t._v(": A date and possibly a time at which the user wants to leave")])])])]),t._v(" "),s("h3",{attrs:{id:"the-potential-problem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-potential-problem"}},[t._v("#")]),t._v(" The potential problem")]),t._v(" "),s("p",[t._v("Now, let's imagine the following:")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("Hey Alice?")]),t._v(" "),s("div",{staticClass:"aliceSpeech female"},[t._v("Yes?")]),t._v(" "),s("div",{staticClass:"userSpeech male"},[t._v("Can you book me a flight from "),s("strong",{staticClass:"slotWord"},[t._v("Geneva")]),t._v(" please?")]),t._v(" "),s("p",[t._v("The problem is that the user did not provide a "),s("code",[t._v("destination")]),t._v(" or a "),s("code",[t._v("date")]),t._v(", for which Alice will have to query the user for details.")]),t._v(" "),s("h3",{attrs:{id:"the-bad-solution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-bad-solution"}},[t._v("#")]),t._v(" The bad solution")]),t._v(" "),s("p",[t._v("You could use the classic "),s("code",[t._v("intent")]),t._v(" decorators with 4 separate methods, which is not recommended but written here to demonstrate:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerFrom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("answerFrom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerTo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("answerTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n\t\n\t\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerDate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("answerDate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BookFlight'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bookFlight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n")])])]),s("p",[t._v("Well, not that effective, is it? lots of writing only to declare the methods, imagine the work in each of the methods to finally get to book the ticket.")]),t._v(" "),s("h3",{attrs:{id:"the-good-solution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-good-solution"}},[t._v("#")]),t._v(" The good solution")]),t._v(" "),s("p",[t._v("This is what I call the "),s("code",[t._v("Fill the glass")]),t._v(" method, because we come always at the same method until everything is filled.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerFrom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerTo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerDate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@IntentHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BookFlight'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bookFlight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DialogSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'From'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("continueDialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\tsessionId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\ttext"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randomTalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WhereFrom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tintentFilter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerFrom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tslot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'From'")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'To'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("continueDialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\tsessionId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\ttext"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randomTalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WhereTo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tintentFilter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerTo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Date'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\tself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("continueDialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\tsessionId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\ttext"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randomTalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WhatDate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tintentFilter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnswerDate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If we got here, we are sure to have all three required information!")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# So we can continue and proceed to the booking!")]),t._v("\n")])])]),s("p",[t._v("What we did here is link our 4 "),s("code",[t._v("intents")]),t._v(" to the same method "),s("code",[t._v("bookFlight")]),t._v(" and we check if all our slots are filled. If not, we ask the user for the information and limit the NLU on the intent that interests us using "),s("code",[t._v("intentFilter")]),t._v(". In the first if condition I even mentioned the "),s("code",[t._v("slot")]),t._v(" the NLU should focus on extracting!")]),t._v(" "),s("p",[t._v("As the answer will come back to the same method, the checks will naturally continue until all three are False, and we can proceed to the booking!")]),t._v(" "),s("p",[t._v("Make sure to read "),s("RouterLink",{attrs:{to:"/skill-development/builtin-intents.html"}},[t._v("builtin intents")]),t._v(" to understand dialogue state, or you will end up having collisions with other skills!")],1)])}),[],!1,null,null,null);e.default=n.exports}}]);